<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <header>
    <div class="header-top">
      <a class="title" href="/">Dummy Deals</a>
      <nav>
        <a href="/">Home</a>
        <a href="#">Features</a>
        <a href="#">Pricing</a>
      </nav>
    </div>
    <div class="filter-container">
      <form method="GET" action="/">
        <div class="filter-checkboxes">
          <fieldset>
            <legend style="display:none;">Category</legend>
            <label><input type="checkbox" name="category" value="GPU">GPU</label>
            <label><input type="checkbox" name="category" value="CPU">CPU</label>
            <label><input type="checkbox" name="category" value="Memory">Memory</label>
            <label><input type="checkbox" name="category" value="SSD">SSD</label>
            <label><input type="checkbox" name="category" value="Motherboard">Motherboard</label>
            <label><input type="checkbox" name="category" value="HDD">HDD</label>
          </fieldset>
          <fieldset>
            <legend style="display:none;">Deal Type</legend>
            <label><input type="checkbox" name="deal_type" value="fair">Fair Deal</label>
            <label><input type="checkbox" name="deal_type" value="good">Good Deal</label>
            <label><input type="checkbox" name="deal_type" value="great">Great Deal</label>
          </fieldset>
        </div>
        <div class="filter-buttons">
          <button type="submit">Apply Filters</button>
          <a class="reset-btn" href="/">Reset Filters</a>
        </div>
      </form>
    </div>
  </header>
  
  <div class="container">
    {% if deals %}
      {% for deal in deals %}
      <div class="card {% if deal.net_profit is not none and deal.net_profit < 10 %}fair-deal-card{% elif deal.net_profit is not none and deal.net_profit < 30 %}good-deal-card{% else %}great-deal-card{% endif %}">
        <div class="card-header {% if deal.net_profit is not none and deal.net_profit < 10 %}fair-deal-header{% elif deal.net_profit is not none and deal.net_profit < 30 %}good-deal-header{% else %}great-deal-header{% endif %}">
          {% if deal.net_profit is not none %}
            {% if deal.net_profit < 10 %}
              Fair Deal
            {% elif deal.net_profit < 30 %}
              Good Deal
            {% else %}
              Great Deal
            {% endif %}
          {% else %}
            Low Sales Data
          {% endif %}
        </div>
        <h2>
          {% if deal.cpu_model %}
            {{ deal.cpu_model }}
          {% else %}
            {{ deal.title }}
          {% endif %}
        </h2>
        <p><strong>Price:</strong> ${{ deal.price }}</p>
        <p>
          <strong>Estimated Sale Price:</strong> 
          {% if deal.estimated_sale_price is not none %}
            ${{ deal.estimated_sale_price }}
          {% else %}
            low sales data
          {% endif %}
        </p>
        <p>
          <strong>Net Profit:</strong> 
          {% if deal.net_profit is not none %}
            ${{ deal.net_profit }}
          {% else %}
            low sales data
          {% endif %}
        </p>
        <p><strong>Condition:</strong> {{ deal.condition }}</p>
        <p><strong>Listed:</strong> {{ deal.post_date }}</p>
        <p><a href="{{ deal.listing_url }}" target="_blank">View Listing</a></p>
      </div>      
      {% endfor %}
    {% else %}
      <p>No good deals found at this time.</p>
    {% endif %}
  </div>
  
  <footer>
    &copy; 2025 Dummy Deals. All Rights Reserved.
  </footer>
</body>
</html>